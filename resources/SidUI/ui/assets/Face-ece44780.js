import{r as a,b as S,j as n}from"./index-9c4db833.js";const w=({onChange:i,type:c,x:l,y:h,texts:e})=>{const[r,M]=a.useState(0),[t,v]=a.useState(0),[b,B]=a.useState(!1);a.useEffect(()=>{var s,o;M(((s=document.querySelector(".grid"))==null?void 0:s.getBoundingClientRect().width)??0),v(((o=document.querySelector(".grid>div>span"))==null?void 0:o.getBoundingClientRect().width)??0)},[]);const j=a.useCallback((s,o)=>{i&&(c==="horizontal"?i==null||i(s):i==null||i(s,o))},[i]),m=a.useCallback(s=>{b!==s&&(s||S.hover(),B(s))},[b]),x=a.useCallback(s=>{if(b){const o=s.currentTarget.getBoundingClientRect(),p=(s.clientX-o.left)/o.width*2-1,f=(s.clientY-o.top)/o.height*2-1,u=((p+1)*(r/2)+p*(t/2))/(r/2)-1,d=((f+1)*(r/2)+f*(t/2))/(r/2)-1;if(u<-1||u>1||d<-1||d>1)return;j(u,d)}},[b,c,j]),g=a.useCallback(s=>{const o=s.currentTarget.getBoundingClientRect(),p=(s.clientX-o.left)/o.width*2-1,f=(s.clientY-o.top)/o.height*2-1,u=((p+1)*(r/2)+p*(t/2))/(r/2)-1,d=((f+1)*(r/2)+f*(t/2))/(r/2)-1;u<-1||u>1||d<-1||d>1||j(u,d)},[c,j]);return c==="horizontal"?n.jsxs("div",{className:"grid horizontal",children:[n.jsx("span",{children:e==null?void 0:e[0]}),n.jsx("div",{onMouseLeave:()=>m(!1),onMouseDown:()=>m(!0),onMouseUp:()=>m(!1),onMouseMove:x,onClick:g,children:n.jsx("span",{style:{left:`calc(${(l+1)/2*100}% - ${(l+1)/2*t}px)`}})}),n.jsx("span",{children:e==null?void 0:e[1]})]}):n.jsxs("div",{className:"grid",children:[n.jsx("span",{children:e==null?void 0:e[0]}),n.jsx("span",{children:e==null?void 0:e[1]}),n.jsx("div",{onMouseLeave:()=>m(!1),onMouseDown:()=>m(!0),onMouseUp:()=>m(!1),onMouseMove:x,onClick:g,children:n.jsx("span",{style:{left:`calc(${(l+1)/2*100}% - ${(l+1)/2*t}px)`,top:`calc(${((h??0)+1)/2*100}% - ${((h??0)+1)/2*t}px)`}})}),n.jsx("span",{children:e==null?void 0:e[2]}),n.jsx("span",{children:e==null?void 0:e[3]})]})};const z=[{name:"brow",label:"Bas du front",texts:["Haut","Intérieur","Extérieur","Bas"]},{name:"eyes",label:"Yeux",texts:["Plissés","Ouverts"]},{name:"nose",label:"Nez",texts:["Relevé","Fin","Épais","Bas"]},{name:"noseProfile",label:"Arête du nez",texts:["Saillante","Courte","Longue","Incurvée"]},{name:"noseTip",label:"Bout du nez",texts:["Bout vers le haut","Cassé à gauche","Cassé à droite","Bout vers le bas"]},{name:"cheekbones",label:"Pommettes",texts:["Haut","Intérieur","Extérieur","Bas"]},{name:"cheeks",label:"Joues",texts:["Émacié","Bouffi"]},{name:"lips",label:"Lèvres",texts:["Minces","Épaisses"]},{name:"jaw",label:"Mâchoire",texts:["Ronde","Étroite","Large","Carrée"]},{name:"chinProfile",label:"Profil menton",texts:["Haut","Intérieur","Extérieur","Bas"]},{name:"chinShape",label:"Forme du menton",texts:["Arrondi","Carré","Pointu","Fossette"]}],C=({update:i,data:c})=>n.jsx("div",{className:"face",children:z.map(l=>{var h,e;return n.jsxs("fieldset",{children:[n.jsx("legend",{children:l.label}),n.jsx(w,{type:l.texts.length===2?"horizontal":"full",x:((h=c==null?void 0:c[l.name])==null?void 0:h.x)??0,onChange:r=>i({[l.name]:{x:r}}),...l.texts.length===4&&{y:((e=c==null?void 0:c[l.name])==null?void 0:e.y)??0,onChange:(r,M)=>i({[l.name]:{x:r,y:M}})},texts:l.texts})]},l.name)})});export{C as default};
